-------------------------------------------------------------------------------------

Стр. 27

Глава 3: Конфигурация

Что ж, сейчас вы знаете как мы будем использовать Git и вам комфортно в командной
строке. Сейчас мы фактически начнём использовать Git. Конечно, мы начнём с его
установки!

-------------------------------------------------------------------------------------

Стр. 28

[ Установка Git ]

Установка Git очень сильно зависит от используемой ОС, такчто я сначала покажу как
это сделать сначала в Mac, затем в Windows.

[ MacOS ]

Существует несколько способов установки Git в Mac: самый простой способ это 
использовать Git OS X Installer. Зайдите на git-osx-installer page в Google Code и 
кликните "Загрузить пакет". Затем загрузите свежий образ, в моём случае это Git 1.7.1.
Смонтируйте образ у установите содержащиеся внутри образа пакеты. Если вы планируете
использовать Git с помощью программ, отличных от терминала, запустите Shell скрипт
в образе.
Если вы поьзуетесь менеджнром пакетов, таким как Homebrew или MacPorts, то это
наипростейший способ установки Git.

-------------------------------------------------------------------------------------

Стр. 29

(Homebrew)

\$ sudo brew install git

(MacPorts)

\$ sudo port selfupdate
\$ sudo port install git-core

(Часть с sudo просто значит запуск команды от пользователя root. Вы обычно будете это
делаеть, когда устанавливаете ПО. Когда используете sudo, командная строка запросит
пароль вашего аккаунта.)
Если вы хотите действительно сложный способ, вы можете установить Git из исходных
кодов. НО сначала вам при дётся установить Apple Developer Tools. Вы можете получить
их ан http://developer.apple.com/mac/. Они находятся на правой боковой панели (Если
у вас не Snow Lopard, установите их с CD/DVD для вашей версии Mac OS X). Как только
всё сделаете, можете продолжать.
Мы собираемся устанавливать Git в директорию /user/local, таким образом убедитесь, 
что терминал сможет его найти в переменной \$PATH. Используя команды о которых 
мы говорили выше, проверьте в ней путь /usr/local/bin (bin означает двоичный и это 
поддиректория, в которой сохранён откомпилированный Git). Если пути нет, то
откройте файл .profile и добавьте такую строчку в конец
export PATH=”/usr/local/bin:\$PATH”

-------------------------------------------------------------------------------------

Стр. 30

        Подсказка от Rock*
        Что такое .profile? Терминал Mac испоьзует файл под названием .profile для 
        хранения списка настроек командной строки. Как только вы сильнее привыкните
        к командной строке, вы заметите, что обращаетесь к этому и другим файлам для
        редактирования. Файл /.profile находится в вашей домашней директории, но вы 
        не сожете увидеть его по умолчанию. Самый простой способ получить к нему 
        доступ через терминал с помощью команды mate ~/.profile. Замените слово mate 
        на выбранный вами редактор.
После того, как вы сохранили и закрыли файл .profile, перезапустите терминал.
Выполнение echo \$PATH покажет вам, что директория /usr/local/bin теперь в перменной
окружения \$PATH.
Сейчас мы готовы к установке Git. Мы выполним несколько команд, которые мы не обсуждали, 
так что если вас не устраивает такое положение, то вам, вероятно, следует использовать
один из предыдущих вариантов. Если вы решились, просто будьте осторожны и пусть эти 
команды служат отправной точкой в ваших исследованиях командной строки!
Мы начнём  с загрузки и распаковывания исходного кода Git:
\$ curl -O http://kernel.org/pub/software/scm/git/git-1.7.1.tar.bz2
\$ tar xzvf git-1.7.1
Сейчас мы перейдём в эту папку и соберём Git:
\$ cd git-1.7.1
\$ ./configure --prefix=/usr/local
\$ make
\$ make install
Готово! Сейчас вы можете удалить папку и архив:
\$ cd ..
\$ rm git-1.7.1
\$ rm git-1.7.1.tar.bz2

-------------------------------------------------------------------------------------

Стр.31

Теперь вы готовы к работе. Вы сможете убедиться, что Git успешно установился 
выполнением команды:
\$ which git
Вы получите /usr/local/bin/git. Если это так, то вы удачно установили Git из исходного 
кода! (Спасибо Дэну Бенжамину за эту инструкцию по устанвке Git из исходных кодов).

[ Windows ]

В связи с корнями от Linux, Git не работает как "родной" в Windows, как и на Mac. Тем 
не менее, пользователи ПК могут воспользоваться преимуществами Git. Вот как это 
делается.
Мы установим Git на Windows, используя установщик Msysygit, который вы сможете загрузить
на странице проекта в Google Code. Загрузите последнюю версию со страницы загрузки, 
которая, кажется, под номером 1.7.0.2 на момент написания статьи (помечена как бета-
-версия). Запустите установщик и следуйте указаниям. Это будет похоже на обычный процесс
установки приложения до тех пока вы не прийдёте к этому окну:
{рисунок}

-------------------------------------------------------------------------------------

Стр. 32

Оно спрашивает как вы хотите интегрировать Git в вашу систему. Если вы пробежитесь по 
опциям, то увидите, что по умолчанию Msysgit создаст отдельную командную строку из 
которой вы можете выполнять команды Git. Конечно, вы сможете выполнять все обычные
команды тоже. Вторя опция включит путь до утилит Git в переменную окружения PATH, 
позволяя вам выполнять команды Git из обычной cmd.exe. Последняя опция, дополненная
предупреждением, включит утилиты Git и Unix в переменную PATH. Это перезапишет утилиты
командной строки Windows, которые имеют те же имена, что и в Unix, так что убедитесь,
что вы этого хотите при выборе этой опции. Так как я предпочёл утилиты Unix, то я
выбрал третью опцию. Если вы не уверены, то вторая  опуця более подходящая, чем первая.
Следующее диалоговое окно может внести некоторую путаницу:
(рисунок)
Здесь говорится о невидимых символах, которые помечают окончания строк. Unix системы
требуют символ первода строки, в то время как Windows системы требуют символа возврата
каретки и первода строки.
Согласно диалоговому окну, опция "Извлекать в стиле Windows, фиксировать в стиле Unix"
лучший вариант для Windows, когда реализуются кросс-платформенные проекты. Если 

-------------------------------------------------------------------------------------

Стр. 33

вы работаете только на Windows машинах, можете выбрать опцию "Извлекать как есть, 
фиксировать как есть", но я не рекомендую этот способ. Вы никогда не знаете когда 
ваш проект понадобится отредактировать на другой ОС.
После этих решений установка Git завершена. Вы вероятно получите ярлых "Git Bash" на
вашем рабочем столе. Хотя, возможно, вы решили включить Git в переменную PATH, так что
вы можете использовать команды из обычной командной строки. Этот ярлык обеспечивает
несколько дополнительных функций, таких как подсветка текста и немного информации по Git
в командной строке. Как только вы приобретёте навык работы с Git, вы можете выбирать как
угодно.
Итак, сейчас вы установили Git в вашу систему. Время кое-что настроить до того как мы
начнём его использовать.

[ Настройка Git ]

Я знаю, мы движемся медленно, но есть ещё один шаг, который необходимо сделать, прежде
чем мы сможем начать. Мы настроем Git так, чтобы он знал кто вы.
Откройте вашу командную строку (в действительности вы не должны закрывать её до конца 
книги) и выполните это:
\$ git config --global user.name “Andrew Burgess”
\$ git config --global user.email “andrew8088@gmail.com”
Конечно, замените моё имя и e-mail на свои. Эта информация очень важна и вы увидите 
позже почему. Несмотря на то, что есть и другик парамеиры конфигурации которые вы можете
использовать, я сейчас установлю просто ещё один сейчас: все языки программирования 
которые я использую независимы от числа пробелов, поэтому я установлю:
\$ git config --global apply.whitespace nowarn

-------------------------------------------------------------------------------------

Стр. 34

Так Git будет игнорировать изменения пробелов. Существует много других конфигурационных
настроек, но они вам не нужны до более глубокого понимания Git. Если вы хотите о них
узнать, вы можете посмотреть их в официальной документации Git.

[ Использование Git ]

Что ж, сейчас мы окончательно готовы начать использовать Git! Первым шагом служит
создание Git репозитория. Запустите свою командную строку, создайте новую директорию
в выбранном месте, перейдите в неё и давайте начнём.

( Git Init )

Это невероятно просто начать использовать Git в проекте. Просто запустите эту команду
в пределах директории с проектом:
\$ git init
Initialized empty Git repository in /Users/andrew/
Documents/Projects/newApp/.git/
Это всё, это всё, что вам нужно сделать. Будь то вы только начинаете свой проект или 
вы уже работали над ним некоторое время, просто запустите эту команду в директории 
проекта и вы готовы использовать Git для управления своим проектом.

Обратите внимание на путь в ответ на команду git init: это ваша директория с проектом
и диркторией .git в ней. Директория .git является домашней для всех операций Git.

( Git Status )

Разумно использовать команду git status всё время, когда вы изучаете Git. Конечно это
будет удобно и когда вы будете опытнее. Вот как это работает. Предположим, у вас есть 
три файла в проекте:

-------------------------------------------------------------------------------------

Стр. 35

• README
• index.html
• default.css
Вы запустили git init в этой директории, затем запустили это:
\$ git status
# On branch master
#
# Initial commit
#
# Untracked files:
#
(use “git add <file>...” to include in what will be
committed)
#
#    READEME
#    default.css
#    index.html
nothing added to commit but untracked files present (use
“git add” to track)
Первая строка говорит вам, что вы в ветке master. Мы обсудим ветвление позже в этой
главе. Следующая строка - Initial commit - служит напоминанием того, что мы ещё 
ничего не закоммитили в наш новый Git репозиторий (мы подготавливаем 
инициализационный коммит). Дальше идёт список неверсируемых файлов. Вот что происходит:
Git по умолчанию не следит за всеми файлами в вашем репозитории с проектом. Вы должны 
указать что версировать. Мы будем смотреть на это в ближайшее время (статусное сообщение
даёт вам подсказку), но сейчас обратите внимание, что все три файла, которые мы имеем в
директории указаны как неверсируемые.

( Git Add )

Итак, Git увидел файлы в вашем проекте, но мы ещё не

--------------------------------------------------------------------------------------

Стр. 36

сказали Git версировать файлы, так давайте сделаем это сейчас. Мы сделаем это с помощью
команды git add.
Мы рассмотрим два способа это сделать. Первым, мы можем сказать Git версировать все 
файлы в директории (и все поддиректории), используя параметр . (точка):
\$ git add .
Если вы не хотите добавлять все файлы, вы можете назначить их индивидуально, передавая
их имена в качестве параметра.
\$ git add index.html default.css
Итак, что происходит, когда мы используем команду git add? Git "перемещает" файлы в то,
что называется промежуточная область. Вы ещё не сказали Git сделать снимок проекта. Это
подготовительный этап. Воспринимайте промежуточную область как погрузочный док: файлы уже
приготовлены, но ещё не погружены в грузовик. Это сделано для вас, чтобы вы смогли сказать
Git что необходимо сделать с файлами в промежуточной области. Предположим вы выполнили
вторую команду, поместив файлы index.html и default.css в промежуточную область. Что вы
получите в ответ на команду git status?
\$ git status
# On branch master
#
# Initial commit
#
# Changes to be committed:
#
(use “git rm --cached <file>...” to unstage)
#
#    new file: default.css
#    new file: index.html
#
# Untracked files:
#
(use “git add <file>...” to include in what will be

-------------------------------------------------------------------------------------

Стр. 37

committed)
#
#   
README
        Подсказка от Rock*
        Важно понять что Git не версирует файлы: он версирует содержимое. Это значит,
        что когда вы изменяете содержимое файла, добавляя или удаляя строки, вам 
        необходимо перезанести эти файлы в промежуточную область. Это может показаться
        неудобным, но это очень мощная концепция. Вы узнаете о шорткате для переноса в 
        промежуточную область и коммита редактируемых файлов в следующей главе.
Как вы можете видеть, Git добавил секцию к выводимой информации: "Изменения для 
фиксирования". Это значит, что файлы default.css и index.html находятся в погрузочном
доке, в ожидани дальнейших инструкций. Давайте дадим сейчас эту инструкция!

( Git Commit )

Как мы уже говорили, основным назначением систем управления исходным кодом является
хранение записи снимков вашего проекта так, чтобы она росла. Перед тем, как мы это 
сделаем, запустите run git ., чтобы убедиться, что всё находится в промежуточной 
области (загрузочном доке). Сейчас мы готовы сделать снимок.
Как мы уже говорили, корректным именем снимка проекта является коммит. Простейший
способ сделать коммит, это выполнить эту команду:
\$ git commit

-------------------------------------------------------------------------------------

Стр. 38

Это перенесёт вас с редактор командной строки по умолчанию. Вот что я получил:
{рисунок}
Каждый коммит, который вы делаете, вы снабжаете коротким сообщением, напоминающим
вам какие изменения в коммите. Это маленький список изменений, если хотите, учёт 
различий между этим и предыдущим коммитом. Так как это первый коммит в нашем проетке,
я просто введу "Initial commit" и закрою редактор. (Также есть много других строк - на
самом деле статусное сообщение Git - в редакторе только те строки, которые начинаются 
с символа # будут использоваться в сообщении коммита.)
Как только вы закроете редактор, вы получите следующий вывод:
[master (root-commit) 604ff85] initial commit
3 files changed, 10 insertions(+), 0 deletions(-)
create mode 100644 README
create mode 100644 default.css
create mode 100644 index.html

-------------------------------------------------------------------------------------

Стр. 39

Пока вы недолжны понимать всего этого, отметьте следующее:
        • Верхняя строка содержит три важные части: имя ветки в которой мы находимся
        (master, опять же, подробнее позже), SHA-1 хэш коммита (смотрите ниже) и наше
        сообщение коммита.
        • Следующая строка говорит вам что было сделано в этом коммите. Вы можете
        видеть, что 3 файла было изменено в этом коммите, 10 строк добавлено и ниодной
        не удалено.
        • И наконец мы видем, что Git создал наши 3 файла. Конечно их сделали мы, но Git
        создал запись о них в папке .git.
Давайте вернёмся к SHA-1 хэшу на минуту. SHA-1 -- это криптографическая хэш функция. В
кратце, Git берёт содержимое коммита и создаёт 40-ка символьный хэш из него. Без 
углубления в детали, я помечу, что вероятность созлать два идентичных хэша практически
невозможна. Это используется дл идентификации коммитов (и других вещей тоже) в Git. То,
что вы видите выше, это просто первая часть хэша. Обычно достаточно первых семи символов
для идентификации.
Вы можете увидеть больше информации о нашем коммите, запустив команду git log:
\$ git log
commit 80f84da53585307947546188cd0540a6ff63f64f
Author: Andrew Burgess <andrew8088@gmail.com>
Date:
Wed Jun 30 14:51:43 2010 -0400
initial commit
Сейчас вы можете видеть полный 40-ка символьный хэш. Вы также можете видеть автора (Git
использует те конфигурационные настройки), дату и время создания коммита, и сообщение
коммита. Как только вы сделаете больше коммитов, команда выведет эту информацию для всех
ваших коммитов, спускаясь от новых к старым. Название команды говорит само за себя. Это

-------------------------------------------------------------------------------------

Стр. 40

лог ваших коммитов. Мы будем более подробно изучать команду git commit. Мы вернёмся к
ней в 4 главе.